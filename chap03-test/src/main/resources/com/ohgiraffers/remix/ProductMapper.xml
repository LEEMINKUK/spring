<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ohgiraffers.remix.ProductMapper">

    <resultMap id="productResultMap" type="com.ohgiraffers.remix.ProductAndRentalDTO">
        <id property="id" column="ID"/>
        <result property="model" column="MODEL"/>
        <result property="ram" column="RAM"/>
        <result property="brand" column="BRAND"/>
        <result property="ssd" column="SSD"/>
        <result property="productDate" column="PRODUCT_DATE"/>
        <association property="idJoin" javaType="com.ohgiraffers.remix.RentalDTO">
            <id property="id" column="ID"/>
            <result property="price" column="PRICE"/>
            <result property="rental" column="rental"/>
        </association>

    </resultMap>


    <select id="selectAllProduct" resultMap="productResultMap">
        SELECT
                  A.ID
                , A.MODEL
                , A.RAM
                , A.SSD
                , A.BRAND
                , A.PRODUCT_DATE
                , B.PRICE
                , B.RENTAL
        FROM PRODUCT A
        JOIN RENTAL B ON A.ID=B.ID
        ORDER BY ID
    </select>

    <select id="selectProductById" resultMap="productResultMap">
        SELECT
                  A.ID
                , A.MODEL
                , A.RAM
                , A.SSD
                , A.BRAND
                , A.PRODUCT_DATE
                , B.PRICE
                , B.RENTAL
            FROM PRODUCT A
            JOIN RENTAL B ON A.ID=B.ID
            WHERE A.ID = #{id}
    </select>

    <insert id="registRental" parameterType="com.ohgiraffers.remix.RentalDTO">
        INSERT
            INTO PRODUCT
            (
              ID
            , PRICE
            , RENTAL
            )
            VALUES
            (
              #{id}
            , #{price}
            , #{rental}
            )
    </insert>
</mapper>